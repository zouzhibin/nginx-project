(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{a4vX:function(e,t,a){"use strict";a.r(t);var r=a("omC7"),i=a.n(r),s=a("bS4n"),n=a.n(s),o=(a("k10u"),a("/BLe")),l=(a("TP9o"),a("K7Fj")),u=(a("pbqO"),a("P0vg")),c=(a("vgXN"),a("QoiM")),d=(a("kpaA"),a("Q+x8")),m=(a("gJGO"),a("iLNi")),p=(a("uErz"),a("ogYY")),f=(a("ul/Q"),a("8DuP")),h=(a("CqKt"),a("FLOZ")),g=(a("XkPB"),a("cpGq")),b=a("a/LZ"),v=a.n(b),C=a("WRrH"),w={name:"share-wechat",components:{moment:v.a,ATable:g.a,ADatePicker:h.a,ARangePicker:h.a.RangePicker,AButton:f.a,ATextarea:p.a.TextArea,AModal:m.a,AInput:p.a,AInputSearch:p.a.Search,ACol:d.a,ARow:c.a,AUpload:u.a,AList:l.b,ARadio:o.a,ARadioGroup:o.a.Group,AlistItem:l.b.Item},data:function(){return{uploadList:[],form:this.$form.createForm(this),weChatAccount:1,sendTime:4,formParameters:{},radioStyle:{display:"block",height:"30px",lineHeight:"30px"}}},mounted:function(){this.setTextValue(this.friendCircleText)},computed:n()({},Object(C.mapGetters)(["confirmList","friendCircleText"]),{images:function(){return this.confirmList},pictureLength:function(){return this.confirmList.length}}),watch:{friendCircleText:function(e){this.setTextValue(e)}},methods:{setTextValue:function(e){this.form.setFieldsValue({friendCircleText:e})},renderPage:function(e,t){this.form.setFieldsValue({weChatAccount:e,sendTime:t})},blurTextarea:function(e){this.$store.dispatch("material/updateText",e.target.value)},deleteList:function(e){this.$store.dispatch("material/updateComfirmList",{index:e,type:"remove"})},deepClone:function(e){return JSON.parse(i()(e))},submitForm:function(){this.form.validateFields(function(e,t){})},moment:v.a,range:function(e,t){for(var a=[],r=e;r<t;r++)a.push(r);return a},disabledDate:function(e){return e&&e<v()().endOf("day")},disabledDateTime:function(){var e=this;return{disabledHours:function(){return e.range(0,v()().hours())},disabledMinutes:function(){return e.range(0,v()().minutes())},disabledSeconds:function(){return e.range(0,v()().seconds())}}},handleSubmit:function(){},onChangeWeChat:function(e){this.weChatAccount=e.target.value},onChangeSendTime:function(e){this.sendTime=e.target.value},fromMaterial:function(){this.$router.push({path:"/material/material-management",query:{type:1}})},beforeUpload:function(a){var r=this,t=a.name.split(".").pop();if(["jpg","png","JPG","PNG"].find(function(e){return e===t}))if(this.pictureLength<9){var e=new FileReader;e.readAsDataURL(a),e.onload=function(e){if(e.total/1024<500){var t=new FormData;t.append("dir","img"),t.append("file",a),r.$redis.file.upload(t).then(function(e){r.$store.dispatch("material/updateComfirmList",{item:r.$redis.defaultRedisUrl+e.data.data.file_path,type:"push"})})}else r.$message.warning("只能上传小于500k的图片!")}}else this.$message.warning("只能上传九张图片！");else this.$message.warning("只能上传图片!");return!1}}},y=(a("fGZo"),a("ZpG+")),T=Object(y.a)(w,function(){var a=this,e=a.$createElement,r=a._self._c||e;return r("div",{staticClass:"container"},[r("a-form",{attrs:{form:a.form},on:{submit:a.handleSubmit}},[r("a-form-item",{attrs:{label:"微信账号","label-col":{span:5},"wrapper-col":{span:12}}},[r("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["weChatAccount",{rules:[{required:!0,message:"请选择微信账号！"}]}],expression:"['weChatAccount', { rules: [{ required: true, message: '请选择微信账号！' }] }]"}],on:{change:a.onChangeWeChat}},[r("a-radio",{style:a.radioStyle,attrs:{value:1}},[a._v("全部微信号")]),r("a-radio",{style:a.radioStyle,attrs:{value:2}},[a._v("按分组选择"),r("a-button",{staticClass:"plus-button",attrs:{icon:"plus",size:"small",type:2===a.weChatAccount?"primary":"",disabled:2!==a.weChatAccount}})],1),r("a-radio",{style:a.radioStyle,attrs:{value:3}},[a._v("自定义选择"),r("a-button",{staticClass:"plus-button",attrs:{icon:"plus",size:"small",type:3===a.weChatAccount?"primary":"",disabled:3!==a.weChatAccount}})],1)],1)],1),r("a-form-item",{attrs:{label:"朋友圈消息","label-col":{span:5},"wrapper-col":{span:12}}},[r("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["friendCircleText",{rules:[{required:!0,message:"请输入朋友圈消息！"}]}],expression:"['friendCircleText', { rules: [{ required: true, message: '请输入朋友圈消息！' }] }]"}],staticStyle:{width:"400px"},attrs:{placeholder:"请输入朋友圈消息",rows:4,autosize:!1},on:{blur:a.blurTextarea}}),r("div",{staticClass:"operation"},[r("a-upload",{attrs:{accept:".jpg,.png",showUploadList:!1,listType:"picture",beforeUpload:a.beforeUpload}},[r("a-button",{attrs:{type:"primary"}},[r("a-icon",{attrs:{type:"upload"}}),r("span",[a._v(" 点击上传")])],1)],1),r("a-button",{staticClass:"plus-button",attrs:{icon:"plus"},on:{click:a.fromMaterial}},[a._v("系统素材")]),r("div",{staticClass:"images"},a._l(a.images,function(e,t){return r("div",{key:t,staticClass:"item"},[r("img",{staticClass:"image",attrs:{src:e}}),r("div",{staticClass:"mask",on:{click:function(e){return a.deleteList(t)}}},[a._v("删除")])])}),0)],1)],1),r("a-form-item",{attrs:{label:"发送规则","label-col":{span:5},"wrapper-col":{span:12}}},[r("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["sendTime",{rules:[{required:!0,message:"请选择发送规则！"}]}],expression:"['sendTime', { rules: [{ required: true, message: '请选择发送规则！' }] }]"}],on:{change:a.onChangeSendTime}},[r("a-radio",{style:a.radioStyle,attrs:{value:4}},[a._v("立即发送")]),r("a-radio",{style:a.radioStyle,attrs:{value:5}},[a._v("定时发送"),r("a-date-picker",{staticClass:"plus-button",attrs:{size:"small",format:"YYYY-MM-DD HH:mm:ss",disabled:5!==a.sendTime,disabledTime:a.disabledDateTime,disabledDate:a.disabledDate,showTime:{defaultValue:a.moment("00:00:00","HH:mm:ss")}}})],1)],1)],1),r("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[r("a-button",{attrs:{type:"primary"},on:{click:a.submitForm}},[a._v("提交")])],1)],1)],1)},[],!1,null,"61771792",null);t.default=T.exports},fGZo:function(e,t,a){"use strict";var r=a("zD0y");a.n(r).a},zD0y:function(e,t,a){}}]);