(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"2xsH":function(t,e,i){"use strict";var r=i("BLIu");i.n(r).a},BLIu:function(t,e,i){},EvMS:function(t,e,i){},Ixax:function(t,e,i){},PqiS:function(t,e,i){"use strict";var r=i("hWDP");i.n(r).a},"Q+x8":function(t,e,i){"use strict";var r=i("qetQ"),s=i("KWxs");r.b.install=function(t){t.use(s.a),t.component(r.b.name,r.b)},e.a=r.b},QoiM:function(t,e,i){"use strict";var r=i("6Ysy"),s=i("KWxs");r.a.install=function(t){t.use(s.a),t.component(r.a.name,r.a)},e.a=r.a},gJG6:function(t){t.exports=JSON.parse('[{"dataIndex":"script_template_name","slots":{"title":"customTitle"}},{"title":"脚本组名称","dataIndex":"script_group_ids","scopedSlots":{"customRender":"script_group_ids"}},{"title":"脚本列表","dataIndex":"script_ids","scopedSlots":{"customRender":"script_ids"}},{"title":"入口脚本名称","dataIndex":"entry_script_name"},{"title":"描述内容","dataIndex":"describe"},{"title":"操作任务","scopedSlots":{"customRender":"operate"}}]')},gz3c:function(t,e,i){"use strict";var r=i("Ixax");i.n(r).a},hWDP:function(t,e,i){},kpaA:function(t,e,i){"use strict";i("4nr5"),i("JkCk")},mcp1:function(t,e,i){"use strict";t.exports=function(t){return 0===t&&1/t==-1/0}},vgXN:function(t,e,i){"use strict";i("4nr5"),i("JkCk")},vvMw:function(t,e,i){"use strict";i.r(e);var r=i("bS4n"),d=i.n(r),s=i("rerW"),l=i.n(s),a=i("cLjf"),c=i.n(a),o=i("unDg"),p=i.n(o),n=i("hDQ3"),h=i.n(n),u=(i("vgXN"),i("QoiM")),m=(i("kpaA"),i("Q+x8")),f=(i("4nr5"),i("EvMS"),i("/umX")),A=i.n(f),v=i("YReu"),_=i.n(v),g=i("gFeG"),b=i("/QLs"),y=i("iczh"),O=i.n(y),w=i("HIiv"),x=i("XSzm"),S=i("mcp1"),C=i.n(S),N=i("y5mB"),k=i("+rUw"),$=i("VTAu"),L={disabled:g.a.bool,activeClassName:g.a.string,activeStyle:g.a.any},I={name:"TouchFeedback",mixins:[x.a],props:Object(b.r)(L,{disabled:!1}),data:function(){return{active:!1}},mounted:function(){var t=this;this.$nextTick(function(){t.disabled&&t.active&&t.setState({active:!1})})},methods:{triggerEvent:function(t,e,i){this.$emit(t,i),e!==this.active&&this.setState({active:e})},onTouchStart:function(t){this.triggerEvent("touchstart",!0,t)},onTouchMove:function(t){this.triggerEvent("touchmove",!1,t)},onTouchEnd:function(t){this.triggerEvent("touchend",!1,t)},onTouchCancel:function(t){this.triggerEvent("touchcancel",!1,t)},onMouseDown:function(t){this.triggerEvent("mousedown",!0,t)},onMouseUp:function(t){this.triggerEvent("mouseup",!1,t)},onMouseLeave:function(t){this.triggerEvent("mouseleave",!1,t)}},render:function(){var t=this.$props,e=t.disabled,i=t.activeClassName,r=void 0===i?"":i,s=t.activeStyle,a=void 0===s?{}:s,o=this.$slots.default;if(1!==o.length)return Object($.a)(!1,"m-feedback组件只能包含一个子元素"),null;var n={on:e?{}:{touchstart:this.onTouchStart,touchmove:this.onTouchMove,touchend:this.onTouchEnd,touchcancel:this.onTouchCancel,mousedown:this.onMouseDown,mouseup:this.onMouseUp,mouseleave:this.onMouseLeave}};return!e&&this.active&&(n=d()({},n,{style:a,class:r})),Object(k.a)(o,n)}},T={props:{prefixCls:g.a.string,disabled:g.a.bool},render:function(t){var e=t,i=this.$props,r=i.prefixCls,s={props:{disabled:i.disabled,activeClassName:r+"-handler-active"},on:this.$listeners};return e(I,s,[e("span",[this.$slots.default])])}};function E(){}function P(t){t.preventDefault()}function D(t){return null!=t}var M=Number.MAX_SAFE_INTEGER||Math.pow(2,53)-1,V={value:g.a.oneOfType([g.a.number,g.a.string]),defaultValue:g.a.oneOfType([g.a.number,g.a.string]),focusOnUpDown:g.a.bool,autoFocus:g.a.bool,prefixCls:g.a.string,tabIndex:g.a.oneOfType([g.a.string,g.a.number]),placeholder:g.a.string,disabled:g.a.bool,readOnly:g.a.bool,max:g.a.number,min:g.a.number,step:g.a.oneOfType([g.a.number,g.a.string]),upHandler:g.a.any,downHandler:g.a.any,useTouch:g.a.bool,formatter:g.a.func,parser:g.a.func,precision:g.a.number,required:g.a.bool,pattern:g.a.string,decimalSeparator:g.a.string,autoComplete:g.a.string,title:g.a.string},F={name:"InputNumber",mixins:[x.a],model:{prop:"value",event:"change"},props:Object(b.r)(V,{focusOnUpDown:!0,useTouch:!1,prefixCls:"rc-input-number",min:-M,step:1,parser:function(t){return t.replace(/[^\w\.-]+/g,"")},required:!1,autoComplete:"off"}),data:function(){var t=void 0;return t=Object(b.q)(this,"value")?this.value:this.defaultValue,t=this.toNumber(t),{inputValue:this.toPrecisionAsStep(t),sValue:t,focused:this.autoFocus}},mounted:function(){var t=this;this.$nextTick(function(){t.autoFocus&&!t.disabled&&t.focus(),t.updatedFunc()})},beforeUpdate:function(){var t=this;this.$nextTick(function(){try{t.start=t.$refs.inputRef.selectionStart,t.end=t.$refs.inputRef.selectionEnd}catch(t){}})},updated:function(){var t=this;this.$nextTick(function(){t.updatedFunc()})},beforeDestroy:function(){this.stop()},watch:{value:function(t){var e=this.focused?t:this.getValidValue(t,this.min,this.max);this.setState({sValue:t,inputValue:this.inputting?e:this.toPrecisionAsStep(e)})},max:function(t){var e=Object(b.j)(this),i="value"in e?e.value:this.sValue;"number"==typeof i&&t<i&&this.__emit("change",t)},min:function(t){var e=Object(b.j)(this),i="value"in e?e.value:this.sValue;"number"==typeof i&&i<t&&this.__emit("change",t)}},methods:{updatedFunc:function(){var t=this.$refs.inputRef;try{if(void 0!==this.cursorStart&&this.focused)if(this.partRestoreByAfter(this.cursorAfter)||this.sValue===this.value){if(this.currentValue===t.value)switch(this.lastKeyCode){case N.a.BACKSPACE:this.fixCaret(this.cursorStart-1,this.cursorStart-1);break;case N.a.DELETE:this.fixCaret(this.cursorStart+1,this.cursorStart+1)}}else{var e=this.cursorStart+1;this.cursorAfter?this.lastKeyCode===N.a.BACKSPACE?e=this.cursorStart-1:this.lastKeyCode===N.a.DELETE&&(e=this.cursorStart):e=t.value.length,this.fixCaret(e,e)}}catch(t){}this.lastKeyCode=null,this.pressingUpOrDown&&(this.focusOnUpDown&&this.focused&&document.activeElement!==t&&this.focus(),this.pressingUpOrDown=!1)},onKeyDown:function(t){if(t.keyCode===N.a.UP){var e=this.getRatio(t);this.up(t,e),this.stop()}else if(t.keyCode===N.a.DOWN){var i=this.getRatio(t);this.down(t,i),this.stop()}this.recordCursorPosition(),this.lastKeyCode=t.keyCode;for(var r=arguments.length,s=Array(1<r?r-1:0),a=1;a<r;a++)s[a-1]=arguments[a];this.$emit.apply(this,["keydown",t].concat(p()(s)))},onKeyUp:function(t){this.stop(),this.recordCursorPosition();for(var e=arguments.length,i=Array(1<e?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];this.$emit.apply(this,["keyup",t].concat(p()(i)))},onChange:function(t){this.focused&&(this.inputting=!0);var e=this.parser(this.getValueFromEvent(t));this.setState({inputValue:e}),this.$emit("change",this.toNumberWhenUserInput(e))},onFocus:function(){this.setState({focused:!0});for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];this.$emit.apply(this,["focus"].concat(p()(e)))},onBlur:function(t){for(var e=this,i=arguments.length,r=Array(1<i?i-1:0),s=1;s<i;s++)r[s-1]=arguments[s];this.inputting=!1,this.setState({focused:!1});var a=this.getCurrentValidValue(this.inputValue);this.setValue(a,function(){e.$emit.apply(e,["blur",t].concat(p()(r)))})},getCurrentValidValue:function(t){var e=t;return e=""===e?"":this.isNotCompleteNumber(parseFloat(e,10))?this.sValue:this.getValidValue(e),this.toNumber(e)},getRatio:function(t){var e=1;return t.metaKey||t.ctrlKey?e=.1:t.shiftKey&&(e=10),e},getValueFromEvent:function(t){var e=t.target.value.trim().replace(/。/g,".");return D(this.decimalSeparator)&&(e=e.replace(this.decimalSeparator,".")),e},getValidValue:function(t,e,i){var r=1<arguments.length&&void 0!==e?e:this.min,s=2<arguments.length&&void 0!==i?i:this.max,a=parseFloat(t,10);return isNaN(a)?t:(a<r&&(a=r),s<a&&(a=s),a)},setValue:function(t,e){var i=this.isNotCompleteNumber(parseFloat(t,10))?null:parseFloat(t,10),r=i!==this.sValue||""+i!=""+this.inputValue;Object(b.q)(this,"value")?this.setState({inputValue:this.toPrecisionAsStep(this.sValue)},e):this.setState({sValue:i,inputValue:this.toPrecisionAsStep(t)},e),r&&this.$emit("change",i)},getPrecision:function(t){if(D(this.precision))return this.precision;var e=t.toString();if(0<=e.indexOf("e-"))return parseInt(e.slice(e.indexOf("e-")+2),10);var i=0;return 0<=e.indexOf(".")&&(i=e.length-e.indexOf(".")-1),i},getMaxPrecision:function(t,e){var i=1<arguments.length&&void 0!==e?e:1;if(D(this.precision))return this.precision;var r=this.step,s=this.getPrecision(i),a=this.getPrecision(r),o=this.getPrecision(t);return t?Math.max(o,s+a):s+a},getPrecisionFactor:function(t,e){var i=1<arguments.length&&void 0!==e?e:1,r=this.getMaxPrecision(t,i);return Math.pow(10,r)},getInputDisplayValue:function(){var t=this.focused,e=this.inputValue,i=this.sValue,r=void 0;return null==(r=t?e:this.toPrecisionAsStep(i))&&(r=""),r},recordCursorPosition:function(){try{var t=this.$refs.inputRef;this.cursorStart=t.selectionStart,this.cursorEnd=t.selectionEnd,this.currentValue=t.value,this.cursorBefore=t.value.substring(0,this.cursorStart),this.cursorAfter=t.value.substring(this.cursorEnd)}catch(t){}},fixCaret:function(t,e){if(void 0!==t&&void 0!==e&&this.input&&this.input.value)try{var i=this.$refs.inputRef,r=i.selectionStart,s=i.selectionEnd;t===r&&e===s||i.setSelectionRange(t,e)}catch(t){}},restoreByAfter:function(t){if(void 0===t)return!1;var e=this.$refs.inputRef.value,i=e.lastIndexOf(t);return-1!==i&&(i+t.length===e.length&&(this.fixCaret(i,i),!0))},partRestoreByAfter:function(r){var s=this;return void 0!==r&&Array.prototype.some.call(r,function(t,e){var i=r.substring(e);return s.restoreByAfter(i)})},focus:function(){this.$refs.inputRef.focus(),this.recordCursorPosition()},blur:function(){this.$refs.inputRef.blur()},formatWrapper:function(t){return C()(t)?"-0":this.formatter?this.formatter(t):t},toPrecisionAsStep:function(t){if(this.isNotCompleteNumber(t)||""===t)return t;var e=Math.abs(this.getMaxPrecision(t));return 0===e?t.toString():isNaN(e)?t.toString():Number(t).toFixed(e)},isNotCompleteNumber:function(t){return isNaN(t)||""===t||null===t||t&&t.toString().indexOf(".")===t.toString().length-1},toNumber:function(t){return this.isNotCompleteNumber(t)?t:D(this.precision)?Number(Number(t).toFixed(this.precision)):Number(t)},toNumberWhenUserInput:function(t){return(/\.\d*0$/.test(t)||16<t.length)&&this.focused?t:this.toNumber(t)},upStep:function(t,e){var i=this.step,r=this.min,s=this.getPrecisionFactor(t,e),a=Math.abs(this.getMaxPrecision(t,e)),o=void 0;return o="number"==typeof t?((s*t+s*i*e)/s).toFixed(a):r===-1/0?i:r,this.toNumber(o)},downStep:function(t,e){var i=this.step,r=this.min,s=this.getPrecisionFactor(t,e),a=Math.abs(this.getMaxPrecision(t,e)),o=void 0;return o="number"==typeof t?((s*t-s*i*e)/s).toFixed(a):r===-1/0?-i:r,this.toNumber(o)},stepFn:function(t,e,i,r){var s=this,a=2<arguments.length&&void 0!==i?i:1,o=r;if(this.stop(),e&&e.preventDefault(),!this.disabled){var n=this.max,u=this.min,l=this.getCurrentValidValue(this.inputValue)||0;if(!this.isNotCompleteNumber(l)){var c=this[t+"Step"](l,a),p=n<c||c<u;n<c?c=n:c<u&&(c=u),this.setValue(c),this.setState({focused:!0}),p||(this.autoStepTimer=setTimeout(function(){s[t](e,a,!0)},o?200:600))}}},stop:function(){this.autoStepTimer&&clearTimeout(this.autoStepTimer)},down:function(t,e,i){this.pressingUpOrDown=!0,this.stepFn("down",t,e,i)},up:function(t,e,i){this.pressingUpOrDown=!0,this.stepFn("up",t,e,i)},handleInputClick:function(){this.$emit("click")}},render:function(t){var e,i=t,r=this.$props,s=r.prefixCls,a=r.disabled,o=r.readOnly,n=r.useTouch,u=r.autoComplete,l=r.upHandler,c=r.downHandler,p=O()((e={},A()(e,s,!0),A()(e,s+"-disabled",a),A()(e,s+"-focused",this.focused),e)),d="",h="",m=this.sValue;if(m||0===m)if(isNaN(m))d=s+"-handler-up-disabled",h=s+"-handler-down-disabled";else{var f=Number(m);f>=this.max&&(d=s+"-handler-up-disabled"),f<=this.min&&(h=s+"-handler-down-disabled")}var v=!this.readOnly&&!this.disabled,_=void 0;null==(_=this.focused?this.inputValue:this.toPrecisionAsStep(this.sValue))&&(_="");var g=void 0,b=void 0;b=n?(g={touchstart:v&&!d?this.up:E,touchend:this.stop},{touchstart:v&&!h?this.down:E,touchend:this.stop}):(g={mousedown:v&&!d?this.up:E,mouseup:this.stop,mouseleave:this.stop},{mousedown:v&&!h?this.down:E,mouseup:this.stop,mouseleave:this.stop});var y=this.formatWrapper(_);D(this.decimalSeparator)&&(y=y.toString().replace(".",this.decimalSeparator));var w=!!d||a||o,x=!!h||a||o,S=this.$listeners,C=S.mouseenter,N=void 0===C?E:C,k=S.mouseleave,$=void 0===k?E:k,L=S.mouseover,I=void 0===L?E:L,M=S.mouseout,V={props:{disabled:x,prefixCls:s},attrs:{unselectable:"unselectable",role:"button","aria-label":"Decrease Value","aria-disabled":!!x},class:s+"-handler "+s+"-handler-down "+h,on:b,ref:"down"};return i("div",{on:{mouseenter:N,mouseleave:$,mouseover:I,mouseout:void 0===M?E:M},class:p,attrs:{title:this.$props.title}},[i("div",{class:s+"-handler-wrap"},[i(T,{props:{disabled:w,prefixCls:s},attrs:{unselectable:"unselectable",role:"button","aria-label":"Increase Value","aria-disabled":!!w},class:s+"-handler "+s+"-handler-up "+d,on:g,ref:"up"},[l||i("span",{attrs:{unselectable:"unselectable"},class:s+"-handler-up-inner",on:{click:P}})]),i(T,V,[c||i("span",{attrs:{unselectable:"unselectable"},class:s+"-handler-down-inner",on:{click:P}})])]),i("div",{class:s+"-input-wrap",attrs:{role:"spinbutton","aria-valuemin":this.min,"aria-valuemax":this.max,"aria-valuenow":m}},[i("input",{attrs:{required:this.required,type:this.type,placeholder:this.placeholder,tabIndex:this.tabIndex,autoComplete:u,maxLength:this.maxLength,readOnly:this.readOnly,disabled:this.disabled,max:this.max,min:this.min,step:this.step,name:this.name,id:this.id,pattern:this.pattern},on:{click:this.handleInputClick,focus:this.onFocus,blur:this.onBlur,keydown:v?this.onKeyDown:E,keyup:v?this.onKeyUp:E,input:this.onChange},class:s+"-input",ref:"inputRef",domProps:{value:y}})])])}},R=i("ILGf"),j=i("KWxs"),K={prefixCls:g.a.string,min:g.a.number,max:g.a.number,value:g.a.oneOfType([g.a.number,g.a.string]),step:g.a.oneOfType([g.a.number,g.a.string]),defaultValue:g.a.number,tabIndex:g.a.number,disabled:g.a.bool,size:g.a.oneOf(["large","small","default"]),formatter:g.a.func,parser:g.a.func,decimalSeparator:g.a.string,placeholder:g.a.string,name:g.a.string,id:g.a.string,precision:g.a.number,autoFocus:g.a.bool},U={name:"AInputNumber",model:{prop:"value",event:"change"},props:Object(b.r)(K,{step:1}),inject:{configProvider:{default:function(){return R.a}}},methods:{focus:function(){this.$refs.inputNumberRef.focus()},blur:function(){this.$refs.inputNumberRef.blur()}},render:function(t){var e,i=t,r=Object(b.j)(this),s=r.prefixCls,a=r.size,o=_()(r,["prefixCls","size"]),n=(0,this.configProvider.getPrefixCls)("input-number",s),u=O()((e={},A()(e,n+"-lg","large"===a),A()(e,n+"-sm","small"===a),e)),l=i(w.a,{attrs:{type:"up"},class:n+"-handler-up-inner"}),c=i(w.a,{attrs:{type:"down"},class:n+"-handler-down-inner"}),p={props:d()({prefixCls:n,upHandler:l,downHandler:c},o),class:u,ref:"inputNumberRef",on:this.$listeners};return i(F,p)},install:function(t){t.use(j.a),t.component(U.name,U)}},q=U,z=(i("uErz"),i("ogYY")),B=(i("zCMs"),i("EFZ+")),G=(i("gJGO"),i("iLNi")),H=(i("pbqO"),i("P0vg")),W=(i("ul/Q"),i("8DuP")),J=(i("XkPB"),i("cpGq")),Q=i("Asgo"),X=i.n(Q),Y=(i("hGoy"),i("Ledl")),Z={labelCol:{span:6},wrapperCol:{span:16}},tt={notNull:{required:!0,message:"请输入此项内容！"},isNumber:{pattern:/^\d*$/,message:"请输入合法数值！"},isLetterNumber:{pattern:/^[a-zA-Z0-9]*$/,message:"请输入字母数字组合！"}},et={name:"u-model-form",props:{script_template_id:{type:Number,default:null},mode:{type:String,default:"new"}},components:{AInput:z.a,AInputSearch:z.a.Search,ATextarea:z.a.TextArea,AInputNumber:q,ASelect:Y.b,ASelectOption:Y.b.Option},data:function(){return{formItemLayout:Z,rules:tt,scriptGroupList:[],scriptList:[],entryScriptList:[]}},computed:{isEdit:function(){return"edit"===this.mode}},watch:{},methods:{init:function(){var t=new Date,e=t.getFullYear(),i=t.getMonth()+1,r=t.getDate(),s=t.getHours(),a=t.getMinutes(),o=t.getSeconds(),n="模板名称"+e+i+r+s+a+o,u="CODE"+e+i+r+s+a+o,l="描述内容"+s+a+o;this.form.setFieldsValue({script_template_name:n,script_template_code:u,describe:l,execute_timeout:600,script_template_type:1,execute_count:1,dispatcher_timeout:600})},load:function(){var r=this,t={script_template_id_list:String(this.script_template_id)};this.$fetch.get_script_template(t).then(function(t){var e=t.data_0[0],i={describe:e.describe,dispatcher_timeout:e.dispatcher_timeout,entry_script_id:e.entry_script_id,execute_count:e.execute_count,execute_timeout:e.execute_timeout,script_group_ids:e.script_group_ids,script_ids:e.script_ids,script_template_code:e.script_template_code,script_template_name:e.script_template_name,script_template_type:e.script_template_type};i.script_group_ids=r.transformData(i.script_group_ids),i.script_ids=r.transformData(i.script_ids),r.getEntryList(i.script_ids),r.form.setFieldsValue(d()({},i))}).catch(function(t){r.$message.error(t.error_message||"模板信息查询失败！")})},transformData:function(t){return t.split(",").map(function(t){return Number(t)})},getScriptGroupList:function(){var e=this,t={page_no:1,length:1e4};this.$fetch.query_script_group(t).then(function(t){e.scriptGroupList=[].concat(p()(t.data_0))}).catch(function(t){e.$message.error(t.error_message||"脚本组查询失败!")})},getScriptList:function(){var r=this;return new X.a(function(e,i){var t={page_no:1,length:1e4};r.$fetch.query_script(t).then(function(t){r.scriptList=[].concat(p()(t.data_0)),e()}).catch(function(t){r.$message.error(t.error_message||"脚本列表查询失败!"),i()})})},getEntryList:function(t){function e(e){var t=i.scriptList.find(function(t){return e===t.script_id});t&&r.push(t)}var i=this,r=[],s=!0,a=!1,o=void 0;try{for(var n,u=l()(t);!(s=(n=u.next()).done);s=!0){e(n.value)}}catch(t){a=!0,o=t}finally{try{!s&&u.return&&u.return()}finally{if(a)throw o}}this.entryScriptList=[].concat(r)}},beforeCreate:function(){this.form=this.$form.createForm(this)},mounted:function(){var e=this;return h()(c.a.mark(function t(){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.getScriptGroupList(),t.next=3,e.getScriptList();case 3:e.isEdit||e.init(),e.isEdit&&e.load();case 5:case"end":return t.stop()}},t,e)}))()}},it=(i("gz3c"),i("ZpG+")),rt=Object(it.a)(et,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"form"},[i("a-form",{attrs:{form:e.form}},[i("a-form-item",{attrs:{"label-col":e.formItemLayout.labelCol,"wrapper-col":e.formItemLayout.wrapperCol,label:"脚本模板名称"}},[i("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["script_template_name",{rules:[e.rules.notNull]}],expression:"['script_template_name', {rules: [rules.notNull]}]"}],attrs:{placeholder:"请输入脚本模板名称"}})],1),i("a-form-item",{attrs:{"label-col":e.formItemLayout.labelCol,"wrapper-col":e.formItemLayout.wrapperCol,label:"脚本模板编码"}},[i("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["script_template_code",{rules:[e.rules.notNull]}],expression:"['script_template_code', {rules: [rules.notNull]}]"}],attrs:{placeholder:"请输入脚本模板编码"}})],1),i("a-form-item",{attrs:{"label-col":e.formItemLayout.labelCol,"wrapper-col":e.formItemLayout.wrapperCol,label:"描述内容"}},[i("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["describe"],expression:"['describe']"}],attrs:{placeholder:"请输入描述内容",autosize:""}})],1),i("a-form-item",{attrs:{"label-col":e.formItemLayout.labelCol,"wrapper-col":e.formItemLayout.wrapperCol,label:"执行时间"}},[i("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["execute_timeout",{rules:[e.rules.notNull,e.rules.isNumber]}],expression:"['execute_timeout', {rules: [rules.notNull, rules.isNumber]}]"}],attrs:{placeholder:"请输入执行时间(秒)"}})],1),i("a-form-item",{attrs:{"label-col":e.formItemLayout.labelCol,"wrapper-col":e.formItemLayout.wrapperCol,label:"脚本组"}},[i("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["script_group_ids",{rules:[e.rules.notNull]}],expression:"['script_group_ids', {rules: [rules.notNull]}]"}],attrs:{mode:"multiple",placeholder:"请选择脚本组",showSearch:!0,optionFilterProp:"children"}},e._l(e.scriptGroupList,function(t){return i("a-select-option",{key:t.script_group_id,attrs:{value:t.script_group_id}},[e._v(e._s(t.script_group_name))])}),1)],1),i("a-form-item",{attrs:{"label-col":e.formItemLayout.labelCol,"wrapper-col":e.formItemLayout.wrapperCol,label:"脚本列表"}},[i("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["script_ids",{rules:[e.rules.notNull]}],expression:"['script_ids', {rules: [rules.notNull]}]"}],attrs:{mode:"multiple",showSearch:!0,placeholder:"请选择脚本列表",optionFilterProp:"children"},on:{change:e.getEntryList}},e._l(e.scriptList,function(t){return i("a-select-option",{key:t.script_id,attrs:{value:t.script_id}},[e._v(e._s(t.script_name))])}),1)],1),i("a-form-item",{attrs:{"label-col":e.formItemLayout.labelCol,"wrapper-col":e.formItemLayout.wrapperCol,label:"入口脚本"}},[i("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["entry_script_id",{rules:[e.rules.notNull]}],expression:"['entry_script_id', {rules: [rules.notNull]}]"}],attrs:{showSearch:!0,placeholder:"请选择入口脚本",optionFilterProp:"children"}},e._l(e.entryScriptList,function(t){return i("a-select-option",{key:t.script_id,attrs:{value:t.script_id}},[e._v(e._s(t.script_name))])}),1)],1),i("a-form-item",{attrs:{"label-col":e.formItemLayout.labelCol,"wrapper-col":e.formItemLayout.wrapperCol,label:"任务类型"}},[i("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["script_template_type",{rules:[e.rules.notNull]}],expression:"['script_template_type', {rules: [rules.notNull]}]"}],attrs:{showSearch:!0,placeholder:"请选择任务类型",optionFilterProp:"children"}},[i("a-select-option",{attrs:{value:1}},[e._v("账号任务")]),i("a-select-option",{attrs:{value:2}},[e._v("终端任务")])],1)],1),i("a-form-item",{attrs:{"label-col":e.formItemLayout.labelCol,"wrapper-col":e.formItemLayout.wrapperCol,label:"执行次数"}},[i("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["execute_count",{rules:[e.rules.notNull]}],expression:"['execute_count', {rules: [rules.notNull]}]"}],attrs:{placeholder:"请输入执行次数"}})],1),i("a-form-item",{attrs:{"label-col":e.formItemLayout.labelCol,"wrapper-col":e.formItemLayout.wrapperCol,label:"调用超时时间"}},[i("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["dispatcher_timeout",{rules:[e.rules.notNull]}],expression:"['dispatcher_timeout', {rules: [rules.notNull]}]"}],attrs:{placeholder:"请输入调用超时时间"}})],1)],1)],1)},[],!1,null,"243fd596",null).exports,st=i("gJG6"),at={name:"script-model",props:{},components:{UModelForm:rt,ATable:J.a,AButton:W.a,AUpload:H.a,AModal:G.a,ATooltip:B.a,AInput:z.a,AInputSearch:z.a.Search,AInputNumber:q,ACol:m.a,ARow:u.a},data:function(){return{scriptModel:st,data:[],tips:null,model:{search_key:null,script_template_code:null},pagination:{current:1,pageSize:10,total:0,onChange:this.changePage,loading:!1},modal:{title:"新建模板",type:"new",script_template_id:null,isShowModal:!1},modalDel:{isShowDelteModal:!1}}},computed:{computedModel:function(){var t=this.pagination;return{page_no:t.current,length:t.pageSize}},filterModel:function(){var t=this.model;return{search_key:t.search_key,script_template_code:t.script_template_code}},isEdit:function(){return"edit"===this.modal.type}},watch:{"modal.type":function(){this.modal.title=this.isEdit?"编辑模板":"新建模板"},filterModel:function(){this.load()}},methods:{changePage:function(t){this.pagination.current=t},load:function(){var u=this;return h()(c.a.mark(function t(){var e,i,r,s,a,o,n;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return u.pagination.loading=!0,e=u.computedModel,i=e.page_no,r=e.length,s=u.filterModel,a=s.search_key,o=s.script_template_code,n={search_key:a,script_template_code:o,page_no:i,length:r},t.next=6,u.$fetch.query_script_template(n).then(function(t){u.data=[].concat(p()(t.data_0)),u.pagination.total=t.data_1.count,u.pagination.loading=!1}).catch(function(t){u.$message.error(t.error_message||"加载失败！"),u.pagination.loading=!1});case 6:case"end":return t.stop()}},t,u)}))()},queryNames:function(t,e){var u=this,i=void 0,r=void 0;r="group"===t?(i="get_script_group",{script_group_id_list:e}):(i="get_script",{script_id_list:e}),this.$fetch[i](r).then(function(t){var e=[],i=!0,r=!1,s=void 0;try{for(var a,o=l()(t.data);!(i=(a=o.next()).done);i=!0){var n=a.value;e.push(n)}}catch(t){r=!0,s=t}finally{try{!i&&o.return&&o.return()}finally{if(r)throw s}}u.tips=[].concat(e)}).catch(function(t){})},changeTipsVisible:function(t,e,i){t||(this.tips=null),t&&this.queryNames(e,i)},showModal:function(){this.modal.isShowModal=!0},hideModal:function(){this.modal.isShowModal=!1},showDelModal:function(){this.modalDel.isShowDelteModal=!0},hideDelModal:function(){this.modalDel.isShowDelteModal=!1},add:function(){this.modal.type="new",this.showModal()},save:function(){var n=this;this.$refs.form.form.validateFields(function(t,e){if(!t){var i=n.modal.script_template_id,r=d()({},e);r.script_group_ids=r.script_group_ids.join(),r.script_ids=r.script_ids.join(),r.execute_count=r.execute_count||1;var s=d()({},r),a=d()({script_template_id:i},r),o=n.isEdit?a:s;n.$fetch.add_script_template(o).then(function(t){n.$message.success("保存成功！"),n.pagination.current=1,n.hideModal(),n.load()}).catch(function(t){n.$message.error(t.error_message||"操作失败！")})}})},edit:function(t){this.modal.type="edit",this.modal.script_template_id=t,this.showModal()},sureDel:function(t){var e=this,i={script_template_id:t};this.$fetch.delete_script_template(i).then(function(t){e.load()}).catch(function(t){e.$message.error(t.error_message||"操作失败！")})},_delete:function(t){var e=this;this.$confirm({title:"提示",content:"确定要删除该条模板数据吗？",okText:"确定",okType:"danger",cancelText:"取消",onOk:function(){e.sureDel(t)},onCancel:function(){}})}},mounted:function(){this.load()}},ot=(i("PqiS"),i("2xsH"),Object(it.a)(at,function(){var i=this,t=i.$createElement,r=i._self._c||t;return r("div",{staticClass:"task-model"},[r("div",{staticClass:"title"},[r("a-row",{attrs:{gutter:16}},[r("a-col",{attrs:{span:6}},[r("a-input-search",{attrs:{placeholder:"请输入脚本关键字"},model:{value:i.model.search_key,callback:function(t){i.$set(i.model,"search_key",t)},expression:"model.search_key"}})],1),r("a-col",{attrs:{span:6}},[r("a-input-search",{attrs:{placeholder:"请输入模板编码"},model:{value:i.model.script_template_code,callback:function(t){i.$set(i.model,"script_template_code",t)},expression:"model.script_template_code"}})],1)],1),r("a-button",{attrs:{type:"primary"},on:{click:i.add}},[i._v("新建模板")])],1),i.modal.isShowModal?r("a-modal",{staticStyle:{top:"30px"},attrs:{width:"600px",title:i.modal.title,visible:i.modal.isShowModal},on:{ok:i.save,cancel:i.hideModal}},[r("u-model-form",{ref:"form",attrs:{mode:i.modal.type,script_template_id:i.modal.script_template_id}})],1):i._e(),r("a-table",{attrs:{columns:i.scriptModel,rowKey:function(t){return t.script_template_id},dataSource:i.data,pagination:i.pagination,loading:i.pagination.loading},on:{change:i.load},scopedSlots:i._u([{key:"script_group_ids",fn:function(e){return[r("a-tooltip",{attrs:{destroyTooltipOnHide:!0,mouseLeaveDelay:.2,placement:"top"},on:{visibleChange:function(t){return i.changeTipsVisible(t,"group",e)}}},[r("template",{slot:"title"},[i._l(i.tips,function(t){return i.tips&&0<i.tips.length?[i._v(i._s(t.script_group_id+"："+t.script_group_name)),r("br")]:i._e()}),r("span")],2),r("a",[i._v(i._s(e))])],2)]}},{key:"script_ids",fn:function(e){return[r("a-tooltip",{attrs:{destroyTooltipOnHide:!0,mouseLeaveDelay:.2,placement:"top"},on:{visibleChange:function(t){return i.changeTipsVisible(t,"list",e)}}},[r("template",{slot:"title"},[i._l(i.tips,function(t){return i.tips&&0<i.tips.length?[i._v(i._s(t.script_id+"："+t.script_name)),r("br")]:i._e()}),r("span")],2),r("a",[i._v(i._s(e))])],2)]}},{key:"operate",fn:function(e){return[r("a-button",{attrs:{type:"primary",size:"small",ghost:""},on:{click:function(t){return i.edit(e.script_template_id)}}},[i._v("编辑")]),r("a-button",{attrs:{type:"danger",size:"small",ghost:""},on:{click:function(t){return i._delete(e.script_template_id)}}},[i._v("删除")])]}}])},[r("span",{attrs:{slot:"customTitle"},slot:"customTitle"},[i._v("模板名称")])])],1)},[],!1,null,"65568a72",null));e.default=ot.exports}}]);